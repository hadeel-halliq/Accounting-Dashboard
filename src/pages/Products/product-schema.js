import { z } from "zod";

/**
 * Product Schema
 * يستخدم للتحقق من صحة البيانات قبل الإرسال
 * متوافق مع react-hook-form + Zod Resolver
 */
export const productSchema = z.object({
  // =========================
  // 1️⃣ البيانات الأساسية
  // =========================
  name: z.string().min(1, "اسم المنتج مطلوب"), // الاسم لا يمكن أن يكون فارغ
  code: z.string().min(1, "رمز المنتج مطلوب"), // الرمز ضروري للبحث والباركود
  category_id: z
    .number({ invalid_type_error: "اختر الفئة" }) // يحمي من ارسال string
    .min(1, "اختر الفئة"), // يجب أن يكون رقم أكبر من 0

  // =========================
  // 2️⃣ البيانات المالية
  // =========================
  cost: z
    .number({ invalid_type_error: "التكلفة غير صالحة" })
    .min(0, "التكلفة غير صالحة"), // لا يمكن أن تكون سالبة
  price: z
    .number({ invalid_type_error: "سعر البيع غير صالح" })
    .min(0, "سعر البيع غير صالح"), // لا يمكن أن تكون سالبة

  // =========================
  // 3️⃣ المخزون والوحدات
  // =========================
  stock: z
    .number({ invalid_type_error: "الكمية غير صالحة" })
    .min(0, "الكمية غير صالحة"), // لا يمكن أن تكون سالبة
  unit: z.string().min(1, "اختر وحدة قياس"), // وحدة البيع (قطعة، صندوق، كغ...)
  min_unit: z
    .number({ invalid_type_error: "الوحدة الدنيا غير صالحة" })
    .optional(), // الحد الأدنى للبيع (قد لا يكون موجود دائماً)
});
